---
nginx::package_ensure: '1.10.1-1.el7.ngx'
nginx::confd_purge: true
nginx::server_purge: true
nginx::http2: 'on'
# https://mozilla.github.io/server-side-tls/ssl-config-generator/?server=nginx-1.7.12&openssl=1.0.1e&hsts=yes&profile=modern
# enabled TLSv1 to support android < 4.4
nginx::ssl_protocols: 'TLSv1 TLSv1.1 TLSv1.2'
nginx::ssl_ciphers: |
  ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!3DES:!MD5:!PSK
nginx::gzip_proxied: 'any'
add_header:
  # 180d is required to get an A+ rating from ssllabs.com
  Strict-Transport-Security: "'max-age=15552000'"
  # openssl x509 -in lsst.codes.pem -pubkey -noout | openssl rsa -pubin -outform der | openssl dgst -sha256 -binary | openssl enc -base64
#  Public-Key-Pins: "'pin-sha256=\"KhocpKDPJ5WatTg6A4CLwPGcxhf+fUGee4FfIk7Nc68=\"; max-age=2592000'"
# alphassl signed *.lsst.codes
ssl_cert: |
  -----BEGIN CERTIFICATE-----
  MIIG0jCCBbqgAwIBAgIMSURVjpeFtMSJXKsgMA0GCSqGSIb3DQEBCwUAMEwxCzAJ
  BgNVBAYTAkJFMRkwFwYDVQQKExBHbG9iYWxTaWduIG52LXNhMSIwIAYDVQQDExlB
  bHBoYVNTTCBDQSAtIFNIQTI1NiAtIEcyMB4XDTE3MDcyODIxMDcyOFoXDTE4MDkw
  NzE2MzgwMFowOjEhMB8GA1UECxMYRG9tYWluIENvbnRyb2wgVmFsaWRhdGVkMRUw
  EwYDVQQDDAwqLmxzc3QuY29kZXMwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEK
  AoIBAQCz+zglXkU35Jbf7qwnrI5PZmi6KGGlrkvizJ3YFyt61zTNK3X2mkR+Q7XZ
  qUbKJ9ezoxSPAaMf3HDeCJyhUbJuuLHLis0SjMNwLUMLUBWDan6gRC0fJ1cwAkQI
  PVRYCzyp4lNl8aOBSaGYIXJ5kNt0pRkrDBqNL8Ka2dVrj6oU+SgW0QwC2YvhoIhq
  ZpV56q8VXOVm0IXQ5eBt2oqe5tCYWSCiXk/D3fkaJIXafUZHgbgdQj1mQUm3ceUG
  lkcCUmGRCXUgWCbA+W4JWwg9qSEHsK1KPOJDVtpm42JqQv+RNnj2GQBy8ASEKAqs
  bXa2ZUD1ACrr7ODM719fdXJWNZMbAgMBAAGjggPEMIIDwDAOBgNVHQ8BAf8EBAMC
  BaAwgYkGCCsGAQUFBwEBBH0wezBCBggrBgEFBQcwAoY2aHR0cDovL3NlY3VyZTIu
  YWxwaGFzc2wuY29tL2NhY2VydC9nc2FscGhhc2hhMmcycjEuY3J0MDUGCCsGAQUF
  BzABhilodHRwOi8vb2NzcDIuZ2xvYmFsc2lnbi5jb20vZ3NhbHBoYXNoYTJnMjBX
  BgNVHSAEUDBOMEIGCisGAQQBoDIBCgowNDAyBggrBgEFBQcCARYmaHR0cHM6Ly93
  d3cuZ2xvYmFsc2lnbi5jb20vcmVwb3NpdG9yeS8wCAYGZ4EMAQIBMAkGA1UdEwQC
  MAAwPgYDVR0fBDcwNTAzoDGgL4YtaHR0cDovL2NybDIuYWxwaGFzc2wuY29tL2dz
  L2dzYWxwaGFzaGEyZzIuY3JsMCMGA1UdEQQcMBqCDCoubHNzdC5jb2Rlc4IKbHNz
  dC5jb2RlczAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwHQYDVR0OBBYE
  FKKXlc9SjPmIAF1XYhUcWaH8v5vdMB8GA1UdIwQYMBaAFPXN1TwIUPlqTzq3l9pW
  g+Zp0mj3MIIB+AYKKwYBBAHWeQIEAgSCAegEggHkAeIAdgBWFAaaL9fC7NP14b1E
  sj7HRna5vJkRXMDvlJhV1onQ3QAAAV2LBpKPAAAEAwBHMEUCIQDE8zrqAMk8nepR
  v8T9LjQtvKaPqd80KCtt9/y1XakHYgIgTLouoJWQAk4SFQUyr3Jghq12wQnwuZtJ
  VTEN6ZYm7BwAdwCkuQmQtBhYFIe7E6LMZ3AKPDWYBPkb37jjd80OyA3cEAAAAV2L
  BpVqAAAEAwBIMEYCIQCjlp/QmlvjF4t17hulJIyRh2Y3eeENzjKN0jB0VBGzdAIh
  AKp2NmyV98zlUDgb49ydjffHfwVJV+rQHYrwOCNIQFesAHcAu9nfvB+KcbWTlCOX
  qpJ7RzhXlQqrUugakJZkNo4e0YUAAAFdiwaWIgAABAMASDBGAiEAokCq4GFLb9oo
  B/P+j/jvawOju3ZioSqIUJ3pZfmjcKsCIQCeHyif7oRn8YkEOfMjSw+Xs9nm6SPM
  Dtd4bQ5lMj+pbgB2AO5Lvbd1zmC64UJpH6vhnmajD35fsHLYgwDEe4l6qP3LAAAB
  XYsGmGgAAAQDAEcwRQIhALxxxLqEpdpMSZ3duvUxiNG3t2QnObMQUUoMelNCV9py
  AiAkrA8POXpAGbE7TIlmYwD7YlRfH1u6z46UCUGMv6Ij2jANBgkqhkiG9w0BAQsF
  AAOCAQEAAUtTnUyaIzdWbkoiGuBIScALJd5aJnBYXkazRhc8rqFFvXxYpTSKDEkf
  /KhTZFhdhk8mWRwfpLee8L0ySVgIktfjI5wWbY3fWd/nPN2/IzNnks7j0mgYPPBW
  bI74jksJxMZfaw2VMx96El/17gr+0y0JuMrfrbRFP06nCpXDR3tvl6MdD/d/6WtP
  l6a/4O3ogFKiOAQl27hSST9fyIe+3uRFJkg7LAFshHD1Tv9Lt5ovraY38KXltwWx
  20X8FVE/6qyPJC3c1Ux+RzbDgG29MtmsuvNlVa6gSW13s49jfLRp+7Fplb22HQnH
  FoDuPhyLo/7ZBXKoONYLOPEq0Udg9w==
  -----END CERTIFICATE-----
# alphassl intermediary
ssl_chain_cert: |
  -----BEGIN CERTIFICATE-----
  MIIETTCCAzWgAwIBAgILBAAAAAABRE7wNjEwDQYJKoZIhvcNAQELBQAwVzELMAkG
  A1UEBhMCQkUxGTAXBgNVBAoTEEdsb2JhbFNpZ24gbnYtc2ExEDAOBgNVBAsTB1Jv
  b3QgQ0ExGzAZBgNVBAMTEkdsb2JhbFNpZ24gUm9vdCBDQTAeFw0xNDAyMjAxMDAw
  MDBaFw0yNDAyMjAxMDAwMDBaMEwxCzAJBgNVBAYTAkJFMRkwFwYDVQQKExBHbG9i
  YWxTaWduIG52LXNhMSIwIAYDVQQDExlBbHBoYVNTTCBDQSAtIFNIQTI1NiAtIEcy
  MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2gHs5OxzYPt+j2q3xhfj
  kmQy1KwA2aIPue3ua4qGypJn2XTXXUcCPI9A1p5tFM3D2ik5pw8FCmiiZhoexLKL
  dljlq10dj0CzOYvvHoN9ItDjqQAu7FPPYhmFRChMwCfLew7sEGQAEKQFzKByvkFs
  MVtI5LHsuSPrVU3QfWJKpbSlpFmFxSWRpv6mCZ8GEG2PgQxkQF5zAJrgLmWYVBAA
  cJjI4e00X9icxw3A1iNZRfz+VXqG7pRgIvGu0eZVRvaZxRsIdF+ssGSEj4k4HKGn
  kCFPAm694GFn1PhChw8K98kEbSqpL+9Cpd/do1PbmB6B+Zpye1reTz5/olig4het
  ZwIDAQABo4IBIzCCAR8wDgYDVR0PAQH/BAQDAgEGMBIGA1UdEwEB/wQIMAYBAf8C
  AQAwHQYDVR0OBBYEFPXN1TwIUPlqTzq3l9pWg+Zp0mj3MEUGA1UdIAQ+MDwwOgYE
  VR0gADAyMDAGCCsGAQUFBwIBFiRodHRwczovL3d3dy5hbHBoYXNzbC5jb20vcmVw
  b3NpdG9yeS8wMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC5nbG9iYWxzaWdu
  Lm5ldC9yb290LmNybDA9BggrBgEFBQcBAQQxMC8wLQYIKwYBBQUHMAGGIWh0dHA6
  Ly9vY3NwLmdsb2JhbHNpZ24uY29tL3Jvb3RyMTAfBgNVHSMEGDAWgBRge2YaRQ2X
  yolQL30EzTSo//z9SzANBgkqhkiG9w0BAQsFAAOCAQEAYEBoFkfnFo3bXKFWKsv0
  XJuwHqJL9csCP/gLofKnQtS3TOvjZoDzJUN4LhsXVgdSGMvRqOzm+3M+pGKMgLTS
  xRJzo9P6Aji+Yz2EuJnB8br3n8NA0VgYU8Fi3a8YQn80TsVD1XGwMADH45CuP1eG
  l87qDBKOInDjZqdUfy4oy9RU0LMeYmcI+Sfhy+NmuCQbiWqJRGXy2UzSWByMTsCV
  odTvZy84IOgu/5ZR8LrYPZJwR2UcnnNytGAMXOLRc3bgr07i5TelRS+KIz6HxzDm
  MTh89N1SyvNTBCVXVmaU6Avu5gMUTu79bZRknl7OedSyps9AsUSoPocZXun4IRZZUw==
  -----END CERTIFICATE-----
# globalsign root
ssl_root_cert: |
  -----BEGIN CERTIFICATE-----
  MIIDdTCCAl2gAwIBAgILBAAAAAABFUtaw5QwDQYJKoZIhvcNAQEFBQAwVzELMAkG
  A1UEBhMCQkUxGTAXBgNVBAoTEEdsb2JhbFNpZ24gbnYtc2ExEDAOBgNVBAsTB1Jv
  b3QgQ0ExGzAZBgNVBAMTEkdsb2JhbFNpZ24gUm9vdCBDQTAeFw05ODA5MDExMjAw
  MDBaFw0yODAxMjgxMjAwMDBaMFcxCzAJBgNVBAYTAkJFMRkwFwYDVQQKExBHbG9i
  YWxTaWduIG52LXNhMRAwDgYDVQQLEwdSb290IENBMRswGQYDVQQDExJHbG9iYWxT
  aWduIFJvb3QgQ0EwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDaDuaZ
  jc6j40+Kfvvxi4Mla+pIH/EqsLmVEQS98GPR4mdmzxzdzxtIK+6NiY6arymAZavp
  xy0Sy6scTHAHoT0KMM0VjU/43dSMUBUc71DuxC73/OlS8pF94G3VNTCOXkNz8kHp
  1Wrjsok6Vjk4bwY8iGlbKk3Fp1S4bInMm/k8yuX9ifUSPJJ4ltbcdG6TRGHRjcdG
  snUOhugZitVtbNV4FpWi6cgKOOvyJBNPc1STE4U6G7weNLWLBYy5d4ux2x8gkasJ
  U26Qzns3dLlwR5EiUWMWea6xrkEmCMgZK9FGqkjWZCrXgzT/LCrBbBlDSgeF59N8
  9iFo7+ryUp9/k5DPAgMBAAGjQjBAMA4GA1UdDwEB/wQEAwIBBjAPBgNVHRMBAf8E
  BTADAQH/MB0GA1UdDgQWBBRge2YaRQ2XyolQL30EzTSo//z9SzANBgkqhkiG9w0B
  AQUFAAOCAQEA1nPnfE920I2/7LqivjTFKDK1fPxsnCwrvQmeU79rXqoRSLblCKOz
  yj1hTdNGCbM+w6DjY1Ub8rrvrTnhQ7k4o+YviiY776BQVvnGCv04zcQLcFGUl5gE
  38NflNUVyRRBnMRddWQVDf9VMOyGj/8N7yy5Y0b2qvzfvGn9LhJIZJrglfCm7ymP
  AbEVtQwdpf5pLGkkeB6zpxxxYu7KyJesF12KwvhHhm4qxFYxldBniYUr+WymXUad
  DKqC5JlR3XC321Y9YeRq4VzW9v493kHMB65jUr9TU/Qr6cf9tveCX4XSQRjbgbME
  HMUfpIBvFSDJ3gyICh3WZlXi/EjJKSZp4A==
  -----END CERTIFICATE-----
ssl_key: |
  ENC[PKCS7,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]
# conf shared between the jenkins master and slave roles
jenkins::slave::version: '3.8'
jenkins::slave::ui_user: ENC[PKCS7,MIIBeQYJKoZIhvcNAQcDoIIBajCCAWYCAQAxggEhMIIBHQIBADAFMAACAQEwDQYJKoZIhvcNAQEBBQAEggEAqBl1AXBWm56h6ITRCo33YlYF0HGJLjdIfcIPRCatHjRqYgrWacud6jIrZ2ycm7ic9V3PH3CrpY+kMh2dv3xzOuPdleG4MxiMhb4DCCUVvC6IQEnwoXnIeGKciG2+122qJCPoTkRltBCwIMdHp5nSntoCyEoWRremnmvMq7gtngFDJELENt2VHtMLTW36SWsKXEZaZwVrRgnEjpj0vHBVrQylUVnPDQve2v2PT7IqjWXMDoJoZ1N4vyJMdaXgNMfnEx8kPfu0+R6+7Rn3t0kwDzJ6p4kLrKq8p1+YifpmreWy82jmUQfs6yLpxdBNuQKn5p/Amd6WsR4VtX+2ifwKMjA8BgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBCnAHXFH4jmeL3ykeY/4ddCgBDHjQ3GOz9h9Wa+dXqmePFX]
jenkins::slave::ui_pass: ENC[PKCS7,MIIBmQYJKoZIhvcNAQcDoIIBijCCAYYCAQAxggEhMIIBHQIBADAFMAACAQEwDQYJKoZIhvcNAQEBBQAEggEAhw6A1klnwgzT1dmr+VNd6RYifZKgUcU35GHrq9D2zVrNSUkOY9mKb+KiLK21QxgKxfmw1Nt+7y7ronFbaQfO7IwNW9sScGONfGshm4Qgg+b5mX6g5wL328W4e7H+IieNbAnVJKTqFP+sW5KtafsBgE/HpIUgS2vvla4Xq3kQrXwRnx3bHoXo/yYwWc5owLsHJgAvUZG6PY+TWFYaV/JN37iWidtHJlFy4Dg2T48BN2itCduQ50DVjlct4Pha9jDtMfBBhOJzG5cDCtE1vQ0BERhpkeEqXLYUmW61wfDmgaJm7n4f5pZQNnDoqKWMtCvGpy7TFlVTyKx9Wa7N/f3ruzBcBgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBD/EijukXsOPqiRAovvuyV0gDDImBkGR1GRyl85vA7cfUteFYYYq01t6JcK8EJcQBHc6mwYYVAYYmYc25E225U3CVg=]
# pipeline scripts will try to restart on a slave based its name; if a slave
# witha unique id in its name is restarted, it reattaches with a new unique
# name and the pipeline script hangs forever.
jenkins::slave::disable_clients_unique_id: true
jenkins::slave::delete_existing_clients: true
rvm::version: '1.29.3'
rvm::system_rubies:
  'ruby-2.2':
    ensure: absent
  'ruby-2.4.2':
    default_use: true
    build_opts:
      - '--disable-binary'
rvm::system_users:
  - jenkins-slave
rvm::rvm_gems:
  'bundler':
    name: 'bundler'
    ruby_version: 'ruby-2.4.2'
    ensure: '1.13.6'
docker::version: '17.12.1.ce'
timezone::timezone: 'US/Pacific'
tuned::profile: 'virtual-host'
